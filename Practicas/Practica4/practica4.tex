
\documentclass{article}

\usepackage{a4wide}
\usepackage[utf8]{inputenc}
\usepackage{enumerate}
\usepackage{xspace}
\usepackage{longtable}
\usepackage{graphics}
\usepackage{listings}

\usepackage{calc}
\usepackage{lmodern}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathdots}
\usepackage{mathtools}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{tasks}

\input{../macros/Algo1Macros}



\begin{document}

\practica{4}{Precondición más débil en SmallLang}

\paragraph{Ejercicio 1.} $\bigstar$ Calcular las siguientes expresiones, donde $a, b$ son variables 
reales, $i$ una variable entera y $A$ es una secuencia
de reales.

\begin{enumerate}[label=\alph*)]
\item $def(a + 1).$
\item $def(a/b).$
\item $def( \sqrt{a/b}).$
\item $def(A[i] + 1).$
\item $def(A[i + 2]).$
\item $def(0 \leq i \leq |A|).$
\item $def(0 \leq i \leq |A| \wedge_L A[i] \leq 0).$
\end{enumerate}

\subsection*{Respuestas}

\begin{enumerate}[label=\alph*)]
  \item $True$.
  \item $b\neq 0$.
  \item $b\neq 0\wedge (a/b)\geq 0$.
  \item aca seria bueno releer la diapo de la teorica
  \item
  \item
  \item
\end{enumerate}

\paragraph{Ejercicio 2.} Calcular las siguientes precondiciones más débiles, donde 
$a, b$ son variables reales, $i$ una variable entera y $A$ es
una secuencia de reales.

\begin{enumerate}[label=\alph*)]
\item $wp(a := a+1, a \geq 0).$
\item $wp(a := a/b, a \geq 0).$
\item $wp(a := A[i], a \geq 0).$
\item $wp(a := b*b, a \geq 0).$
\item $wp(b := b+1, a \geq 0).$
\end{enumerate}

\paragraph{Ejercicio 3.} $\bigstar$ Calcular las siguientes precondiciones más débiles, donde 
$a, b$ son variables reales, $i$ una variable entera y $A$
es una secuencia de reales.

\begin{enumerate}[label=\alph*)]
\item $wp(a := a+1; b := a/2, b \geq 0).$
\item $wp(a := A[i] + 1; b := a*a, b\  6= 2).$
\item $wp(a := A[i] + 1; a := b*b, a \geq 0).$
\item $wp(a := a-b; b := a+b, a \geq 0 \wedge b \geq 0).$
\end{enumerate}

\paragraph{Ejercicio 4.} $\bigstar$ Sea $Q \equiv (\forall j :\mathbb{Z})(0 \leq j < |A| \rightarrow_L
 A[j] \geq 0)$. Calcular las 
siguientes precondiciones más débiles, donde i es
una variable entera y A es una secuencia de reales.

\begin{enumerate}[label=\alph*)]
\item $wp(A[i] := 0, Q).$
\item $wp(A[i+2] := 0, Q).$
\item $wp(A[i+2] := -1, Q).$
\item $wp(A[i] := 2 * A[i], Q).$
\item $wp(A[i] := A[i-1], Q).$
\end{enumerate}

\paragraph{Ejercicio 5.} Calcular wp(S, Q), para los siguientes pares de programas S y postcondiciones Q.

\begin{enumerate}[label=\alph*)]
\item $S \equiv i := i + 1$\\
  $Q \equiv (\forall j :Z)(0 \leq j < |A| \rightarrow_L A[j] 6= 0)$
\item $S \equiv A[0] := 4$\\
   $Q \equiv (\forall j :Z)(0 \leq j < |A| \rightarrow_L A[j] 6= 0)$
\item $S \equiv A[2] := 4$\\
   $Q \equiv (\forall j :Z)(0 \leq j < |A| \rightarrow_L A[j] 6= 0)$
\item $S \equiv A[i] := A[i+1] - 1$\\
   $Q \equiv (\forall j :Z)(0 < j < |A| \rightarrow_L A[j] \geq A[j - 1])$
\item $S \equiv A[i] := A[i+1] - 1$\\
   $Q \equiv (\forall j :Z)(0 < j < |A| \rightarrow_L A[j] \leq A[j - 1])$
\end{enumerate}

\paragraph{Ejercicio 6.}. Escribir programas para los siguientes problemas y demostrar 
formalmente su corrección usando la precondición
más débil.

\begin{enumerate}[label=\alph*)]
\item \textbf{proc problema1 }(inout a: Z) {\\
   \hspace*{6mm} \textbf{Pre }$\{a = a_0 \wedge a \geq 0\}$\\
   \hspace*{6mm} \textbf{Post }$\{a = a_0 + 2\}$\\
   }

\item \textbf{proc problema2 }(in a: Z, out b: Z) {\\
   \hspace*{6mm} \textbf{Pre }$\{a 6= 0\}$\\
   \hspace*{6mm} \textbf{Post }$\{b = a + 3\}$\\
   }

\item \textbf{proc problema3 }(in a: Z, in b: Z, out c: Z) {\\
   \hspace*{6mm} \textbf{Pre }$\{true\}$\\
   \hspace*{6mm} \textbf{Post }$\{c = a + b\}$\\
   }

\item \textbf{proc problema4 }(in a: seqhZi, in i: Z, out result: Z) {\\
   \hspace*{6mm} \textbf{Pre }$\{0 \leq i < |a|\}$\\
   \hspace*{6mm} \textbf{Post }$\{result = 2 * a[i]\}$\\
   }

\item \textbf{proc problema5 }(in a: seqhZi, in i: Z, out result: Z) {\\
   \hspace*{6mm} \textbf{Pre }$\{0 \leq i \wedge i + 1 < |a|\}$\\
   \hspace*{6mm} \textbf{Post }$\{result = a[i] + a[i + 1]\}$\\
   }
\end{enumerate}

                                                            
\paragraph{Ejercicio 7.} $\bigstar$ Calcular wp(S, Q), para los siguientes pares de programas S y postcondiciones Q.

\begin{enumerate}[label=\alph*)]
\item $S \equiv$\\
   if $( a < 0 )$\\
      $b := a$\\
   else\\
      $b := -a$\\
   endif\\

   $Q \equiv (b = -|a|)$\\
\item $S \equiv$\\
   if $( a < 0 )$\\
     $ b := a$\\
   else\\
     $ b := -a$\\
   endif\\

   $Q \equiv (b = |a|)$\\

\item $S \equiv$\\
   if $( i > 0 )$\\
     $ s [ i ] := 0$\\
   else\\
     $ s [ 0 ] := 0$\\
   endif\\

   $Q \equiv (\forall j :Z)(0 \leq j < |s| \rightarrow_L s[j] \geq 0)$\\
\item $S \equiv$
   if $( i > 1 )$\\
      $s [ i ] := s [ i -1]$\\
   else\\
     $ s [ i ] := 0$\\
   endif\\

   $Q \equiv (\forall j :Z)(1 \leq j < |s| \rightarrow_L s[j] = s[j - 1])$\\

\item $S \equiv$\\
   if $( s [ i ] < 0 )$\\
     $ s [ i ] := -s [ i ]$\\
   else\\
      $skip$\\
   endif\\

   $Q \equiv 0 \leq i < |s| \wedge_L s[i] \geq 0$\\
\item $S \equiv$\\
   if $( s [ i ] > 0 )$\\
      $s [ i ] := -s [ i ]$\\
   else\\
      $skip$\\
   endif\\

   $Q \equiv (\forall j :Z)(0 \leq j < |s| \rightarrow_L s[j] \geq 0)$
\end{enumerate}
                                                          
\paragraph{Ejercicio 8.} $\bigstar$ Escribir programas para los siguientes problemas y demostrar 
formalmente su corrección usando la precon-dición más débil.

\begin{enumerate}[label=\alph*)]
\item \textbf{proc problema1 }(in s: seqhZi, in i: Z, inout a: Z) {\\
                                   
   \hspace*{6mm} \textbf{Pre }$\{0 \leq i < |s| \wedge_L a = j=0 s[j]\}$\\
                    
   \hspace*{6mm} \textbf{Post }$\{a = j=0 s[j]\}$\\
   }

\item \textbf{proc problema2 }(in s: seqhZi, in i: Z, inout a: Z) {\\
                                  
   \hspace*{6mm} \textbf{Pre }$\{0 \leq i < |s| \wedge a = j=0 s[j]\}$\\
                    
   \hspace*{6mm} \textbf{Post }$\{a = j=1 s[j]\}$\\
   }

\item \textbf{proc problema3 }(in s: seqhZi, in i: Z, out res: Bool) {\\
   \hspace*{6mm} \textbf{Pre }$\{0 \leq i < |s| \wedge 
   		(\forall j :Z)(0 \leq j < i \rightarrow_L s[j] \geq 0)\}$\\
   \hspace*{6mm} \textbf{Post }$\{res = true \leftrightarrow (\forall j :Z)
          (0 \leq j \leq i \rightarrow_L s[j] \geq 0)\}$\\
   }

\item \textbf{proc problema4 }(in s: seqhZi, in i: Z, inout a: Z) {\\
                                   
   \hspace*{6mm} \textbf{Pre }${0 \leq i < |s| \wedge_L a = j=0 (if s[j] 6= 0 
   		then 1 else 0 fi)}$\\
                   
   \hspace*{6mm} \textbf{Post }$\{a = j=0 (if s[j] 6= 0 then 1 else 0 fi)\}$\\
   }

\item \textbf{proc problema5 }(in s: seqhZi, in i: Z, inout a: Z) {\\
                                  
    \hspace*{6mm} \textbf{Pre }$\{0 < i \leq |s| \wedge_L a = j=1 (if s[j] 6= 0 
    then 1 else 0 fi)\}$\\
                    
   \hspace*{6mm} \textbf{Post }$\{a = j=0 (if s[j] 6= 0 then 1 else 0 fi)\}$\\
   }                     
\end{enumerate}

\end{document}